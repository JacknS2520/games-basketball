<!DOCTYPE html>
<html>
    <head>
        <title>Basketball - 2 Player</title>
        <script>
            function style() {
                const canvas = document.getElementById('canvas')

                canvas.width = '100%'
            }
            function players() {
                const canvas = document.getElementById('canvas');
                const ctx = canvas.getContext('2d');

                // Initial positions for both players
                const player1 = { x: 100, y: 100, color: 'blue' };
                const player2 = { x: 300, y: 100, color: 'red' };
                const radius = 40;

                // Draw both players
                function drawPlayers() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    // Player 1
                    ctx.beginPath();
                    ctx.arc(player1.x, player1.y, radius, 0, 2 * Math.PI);
                    ctx.fillStyle = player1.color;
                    ctx.fill();
                    // Player 2
                    ctx.beginPath();
                    ctx.arc(player2.x, player2.y, radius, 0, 2 * Math.PI);
                    ctx.fillStyle = player2.color;
                    ctx.fill();
                }

                // Handle key presses
                document.addEventListener('keydown', function(event) {
                    switch(event.key) {
                        // Player 1 (WASD)
                        case 'w':
                        case 'W':
                            player1.y -= 10;
                            break;
                        case 's':
                        case 'S':
                            player1.y += 10;
                            break;
                        case 'a':
                        case 'A':
                            player1.x -= 10;
                            break;
                        case 'd':
                        case 'D':
                            player1.x += 10;
                            break;
                        // Player 2 (Arrow keys)
                        case 'ArrowUp':
                            player2.y -= 10;
                            break;
                        case 'ArrowDown':
                            player2.y += 10;
                            break;
                        case 'ArrowLeft':
                            player2.x -= 10;
                            break;
                        case 'ArrowRight':
                            player2.x += 10;
                            break;
                    }
                    drawPlayers();
                });

                // Initial draw
                drawPlayers();
            }
            function ballf(ctx, player1, player2, radius) {
                // Ball state
                let playerWBall = player1;
                let ball = { x: player1.x + radius, y: player1.y };
                let ballshot = false;

                // Load basketball image
                const ballImg = new Image();
                ballImg.src = "Basketball.png";

                // Update ball position to follow player
                function updateBall() {
                    if (!ballshot) {
                        if (playerWBall === player1) {
                            ball.x = player1.x + radius;
                            ball.y = player1.y;
                        } else {
                            ball.x = player2.x - radius;
                            ball.y = player2.y;
                        }
                    }
                }

                // Draw the ball as an image
                function drawBall() {
                    ctx.drawImage(ballImg, ball.x - 20, ball.y - 20, 40, 40);
                }

                // Ball shooting animation
                function shoot() {
                    if (ballshot) return; // Prevent multiple shots at once
                    ballshot = true;
                    let dy = -10;
                    let shootInterval = setInterval(function() {
                        ball.y += dy;
                        drawBall();
                        if (ball.y < 0) {
                            clearInterval(shootInterval);
                            ballshot = false;
                            playerWBall = (playerWBall === player1) ? player2 : player1;
                            updateBall();
                        }
                    }, 20);
                }

                // Listen for Shift key to shoot
                document.addEventListener('keydown', function(event) {
                    if (!ballshot && (event.key === 'Shift' || event.key === 'ShiftLeft' || event.key === 'ShiftRight')) {
                        shoot();
                    }
                });

                // Public API for ball
                return {
                    ball,
                    updateBall,
                    drawBall,
                    shoot
                };
            }
            window.onbeforeunload = function() {
                alert("Changes you made may not be saved.");
            };


            window.onload = players;
        </script>
    </head>
    <body style="background-image: url('Basketball\ Court\(main\).png'); background-repeat: no-repeat; background-size: cover; align-self: center;">
        <canvas id="canvas" style="max-width: 100%; max-height: 100%;" style="background-color: transparent;"></canvas>
    </body>
</html>
